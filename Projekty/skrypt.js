var student0 = {
	"first_name": "Tomasz",
	"last_name": "Tomkowski",
	"birth_date": "30 AUG 1991",
	"year_of_study": "3",
	"courses": {
		"2013": {
			"AlgorithmsI": {
				"grades": {
					"exercices": [
						2,
						4
					],
					"lecture": [
						2,
						5
					]
				}
			},
			"BasicPhysicsI": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			},
			"ProgrammingI": {
				"grades": {
					"exercices": [
						4.5
					],
					"lecture": [
						2,
						3.5
					]
				}
			}
		},
		"2014": {
			"ProgrammingII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			},
			"BasicPhysicsII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			},
			"AlgorithmsII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			}
		}
	}
};
var student1 = {
	"first_name": "Jan",
	"last_name": "Dzban",
	"birth_date": "29 AUG 1990",
	"year_of_study": "2",
	"courses": {
		"2013": {
			"AlgorithmsI": {
				"grades": {
					"exercices": [
						2,
						4
					],
					"lecture": [
						2,
						5
					]
				}
			},
			"BasicPhysicsI": {
				"grades": {
					"exercices": [
						4
					],
					"lecture": [
						5
					]
				}
			},
			"ProgrammingI": {
				"grades": {
					"exercices": [
						4.5
					],
					"lecture": [
						2,
						3.5
					]
				}
			}
		},
		"2014": {
			"ProgrammingII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			},
			"BasicPhysicsII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			},
			"AlgorithmsII": {
				"grades": {
					"exercices": [
						5
					],
					"lecture": [
						5
					]
				}
			}
		}
	}
};
var student2=
{
    "first_name": "Jerzy",
    "last_name": "Adamiak",
    "birth_date": "29 AUG 1990",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        4
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        4.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            }
        }
    }
};
var student3=
{
    "first_name": "Józef",
    "last_name": "Kowal",
    "birth_date": "29 AUG 1990",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        4
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        4.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            }
        }
    }
};
var student4=
{
    "first_name": "Roman",
    "last_name": "Halik",
    "birth_date": "29 AUG 1990",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        4
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        4.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        },
        "2015": {
            "ProgrammingIII": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "AlgorithmsIII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        }
    }
};
var student5=
{
    "first_name": "Janusz",
    "last_name": "Januszewicz",
    "birth_date": "19 AUG 1992",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        5
                    ],
                    "lecture": [
                        2,
                        3
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        4.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        }
    }
};
var student6=
{
    "first_name": "Krzysztof",
    "last_name": "Krzysztofowicz",
    "birth_date": "18 FEB 1990",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        3
                    ],
                    "lecture": [
                        2,
                        3
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        }
    }
};
var student7=
{
    "first_name": "Karol",
    "last_name": "Karolak",
    "birth_date": "11 JAN 1989",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        4
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        3.0
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        }
    }
};
var student8=
{
    "first_name": "Wojciech",
    "last_name": "Wojciechowski",
    "birth_date": "03 MAR 1988",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        5
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        4
                    ],
                    "lecture": [
                        4
                    ]
                }
            }
        }
    }
};
var student9=
{
    "first_name": "Piotr",
    "last_name": "Piotrowski",
    "birth_date": "02 FEB 1987",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        5
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        3
                    ]
                }
            }
        }
    }
};
var student10=
{
    "first_name": "Aleksander",
    "last_name": "Żurawski",
    "birth_date": "01 JAN 1986",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        5
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "ProgrammingI": {
                "grades": {
                    "exercices": [
                        3.5
                    ],
                    "lecture": [
                        2,
                        3.5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            }
        }
    }
};
var student11=
{
    "first_name": "Henryk",
    "last_name": "Słomiany",
    "birth_date": "01 JAN 1986",
    "year_of_study": "2",
    "courses": {
        "2013": {
            "AlgorithmsI": {
                "grades": {
                    "exercices": [
                        2,
                        5
                    ],
                    "lecture": [
                        2,
                        5
                    ]
                }
            },
            "BasicPhysicsI": {
                "grades": {
                    "exercices": [
                        3
                    ],
                    "lecture": [
                        4
                    ]
                }
            },
            "Algebra": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            }
        },
        "2014": {
            "ProgrammingII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "BasicPhysicsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            },
            "AlgorithmsII": {
                "grades": {
                    "exercices": [
                        5
                    ],
                    "lecture": [
                        5
                    ]
                }
            }
        }
    }
};

var lista_studentow = new Array(student0, student1, student2,
	student3, student4, student5, student6, student7,
	student8, student9, student10, student11);


class Helper{

	constructor(l){
		self.students = l
	}

	getStudents(){
		return self.students;
	}

    getStudent(i){
		return self.students[i-1];
    }
    
    clearList(id){
        document.getElementById(id).innerHTML = ""
    }

    printValue(v, id, tx){
        document.getElementById(id).innerHTML = tx + " " + v
    }

	printStudents(lista, id, title){
		var info = '<b>' + title + '</b><br />';
		for (var i = 0; i < lista.length; i++){
			info = info + (i+1) + ". " + lista[i].first_name + " " + lista[i].last_name + "<br />";
		}
		document.getElementById(id).innerHTML = info;
	}

	sortStudents(){
		var studentListSorted = self.students.sort(function(x, y){
					if (x.last_name < y.last_name) { return -1; }
					if (x.last_name > y.last_name) { return 1; }
					return 0;
				}
		)
        this.printStudents(studentListSorted, 'ls', 'Lista studentów')
		return studentListSorted;
	}

	getStudentList(studentObjlist, id){
		var result = studentObjlist.sort(function(x, y){
					if (x.last_name < y.last_name) { return -1; }
					if (x.last_name > y.last_name) { return 1; }
					return 0;
				}
		);
		this.printStudents(result, 'ls', 'Nowa lista studentów')
    }
    
    getStudentForCourse(year, CourseName){
        var result = Array();
        for(var i = 0; i < self.students.length; i++){
           if(year in self.students[i].courses){
               console.log("Roczek: " + year)
               if (CourseName in self.students[i].courses[year]){
                console.log("Roczek: " + year + " Kurs: " + CourseName)
                var myObj = {
                    first_name: self.students[i].first_name,
                    last_name: self.students[i].last_name,
                    }
                    result.push(myObj);
                }
           }
        }

        var title = "Studenci z kursu " + CourseName + " z roku " + year;
        if (result.length == 0){
            document.getElementById('ls').innerHTML = title + ": BRAK";
        }
        else{
            this.printStudents(result, 'ls', title)
        }
    }

    getAverageForStudentInYear(studentObj, year){
        var result = 0;
        var count = 0;
        for (var course in studentObj.courses[year]){
            for (var i = 0; i < studentObj.courses[year][course]['grades']['exercices'].length; i++){
                result += studentObj.courses[year][course]['grades']['exercices'][i]
                count += 1
            }
            for (var i = 0; i < studentObj.courses[year][course]['grades']['lecture'].length; i++){
                result += studentObj.courses[year][course]['grades']['lecture'][i]
                count += 1
            }
        }
        var final_value = Math.round((result/count)*100)/100
        this.printValue("<b>" + final_value + "</b>", 'av', 'Średnia ' + "<b>" + studentObj.first_name + " " + studentObj.last_name + "</b>" + " z roku " + "<b>" + year + "</b>" + " wynosi: ")
        return result/count;
    }

    getAverageForStudentAllYears(studentObj){
        var result = 0;
        var count = 0;
        for(var y in studentObj.courses){
            result += this.getAverageForStudentInYear(studentObj, y);
            count += 1
        }
        var final_value = Math.round((result/count)*100)/100
        this.printValue("<b>" + final_value + "</b>", 'av', 'Średnia Studenta ' + "<b>" + studentObj.first_name + " " + studentObj.last_name + "</b>" + " ze <b> wszystkich lat </b> to: ")
    }

    getAverageForCourse(studentObjlist, year, CourseName){
        var result = 0;
        var count = 0;
        for (var j = 0; j < studentObjlist.length; j++){
            for (var c in studentObjlist[j]['courses'][year]){
                if (c == CourseName){
                    for (var i = 0; i < studentObjlist[j].courses[year][c]['grades']['exercices'].length; i++){
                        result += studentObjlist[j].courses[year][c]['grades']['exercices'][i]
                        count += 1
                    }
                    for (var i = 0; i < studentObjlist[j].courses[year][c]['grades']['lecture'].length; i++){
                        result += studentObjlist[j].courses[year][c]['grades']['lecture'][i]
                        count += 1
                    }
                }
            }
        }
        var final_value = Math.round((result/count)*100)/100
        this.printValue("<b>" + final_value + "</b>", 'av', 'Średnia kursu ' + "<b>" + CourseName +"</b>" + " w roku: " + "<b>" + year + "</b>" + ' to: ') 
    }
}   

myHelper = new Helper(lista_studentow);